/*!
 *version:0.1.20,
 *author:hezedu,
 *Released: jQuery.Released,
 *Date:2015-2-24
*/
function sas(e,t){function n(l,u,o,p){function c(a,r,s,l){s[0]===s[1]?l?(l[2][1]++,c.apply(null,l)):t.allEnd&&t.allEnd(null,e):"number"==typeof a&&n(s[1],r,s,l)}function i(e,i){if(s++,!a){switch(e){case"$STOP":return t.allEnd&&t.allEnd(i),a=!0;case"$THIS=":p&&(p[1][p[0]]=i),o[1]=o[0];break;case"$END":o[1]=o[0];break;case"$HOLD":o[1]++;break;case"$RELOAD":return u[l]=i||u[l],n.apply(null,b);default:if(o[1]++,arguments.length<2)u[l]=e;else{for(var f=[],h=0,d=arguments.length;d>h;h++)f.push(arguments[h]);u[l]=f}}t.process&&("undefined"!=typeof setImmediate?setImmediate(function(){t.process(r,s)}):setTimeout(function(){t.process(r,s)},0)),c.apply(null,b)}}if(!a){var f=Object.prototype.toString.call(u[l]).slice(8,-1);switch(f){case"Object":for(var h=Object.keys(u[l]),d=h.length,m=[d,0],g=0;d>g;g++)n(h[g],u[l],m,arguments);break;case"Array":var m=[u[l].length,0];n(m[1],u[l],m,arguments);break;case"Function":r++;var b=arguments;if(u[l].length>1){var y,v={index:l,path:[l]},k=0,E=!1;if(p)for(y=p,v.parent=p[1],v.pIndex=p[0];y;)k++,E||"number"!=typeof y[0]||(v.Sparent=y[1],v.SpIndex=y[0],E=!0),v.path.splice(0,0,y[0]),y=y[3];v.push=function(t){o[0]++,v.parent?v.parent[v.pIndex].push(t):e.push(t)},v.fspath=function(){for(var e=[],t=this.path,n=0,a=t.length;a>n;n++)"string"==typeof t[n]&&e.push(t[n]);return e},u[l](i,v)}else u[l](i);break;default:if(!t.iterator)throw new Error("SAS:类型错误:"+f+"。 任务必须是一个function。");u[l]=t.iterator(u[l]),n.apply(null,arguments)}}}t=t||{};var a=!1,r=0,s=0,l=[e.length,0];n(l[1],e,l)}"object"==typeof module&&"object"==typeof module.exports&&(module.exports=sas);